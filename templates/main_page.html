<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Flight Search</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>
</head>

<body>
    <nav>
        {% include "navbar.html" %}
    </nav>
    <div class="container mt-5">
        <h2 class="text-center">Flight Search</h2>
        <ul class="nav nav-tabs mt-4" id="myTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="upcomingFlights-tab" data-toggle="tab" href="#upcomingFlights" role="tab"
                    aria-controls="upcomingFlights" aria-selected="true">Search for Upcoming Flights</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="flightStatus-tab" data-toggle="tab" href="#flightStatus" role="tab"
                    aria-controls="flightStatus" aria-selected="false">Search for Flight Status</a>
            </li>
        </ul>
        <div class="tab-content mt-3" id="myTabContent">
            <div class="tab-pane fade show active" id="upcomingFlights" role="tabpanel"
                aria-labelledby="upcomingFlights-tab">

                <form id="flightSearchFormA" action="/flightSearchA" method="POST">
                    <!-- Form content for Search for Upcoming Flights -->
                    <div class="form-group">
                        <label for="searchFactorA">Search By:</label>
                        <select id="searchFactorA" name="searchFactorA" class="form-select" required>
                            <option selected>Source City/Airport</option>
                            <option>Destination City/Airport</option>
                            <option>Date</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sourceCityA">Source City/Airport Name:</label>
                        <input type="text" class="form-control" id="sourceCityA" name="sourceCityA">
                    </div>
                    <div class="form-group">
                        <label for="destinationCityA">Destination City/Airport Name:</label>
                        <input type="text" class="form-control" id="destinationCityA" name="destinationCityA">
                    </div>
                    <div class="form-group">
                        <label for="dateA">Date:</label>
                        <input type="date" class="form-control" id="dateA" name="dateA">
                    </div>

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                    {% if error %}
                        <p class="error"><strong>Error:</strong> {{error}}</p>
                    {% endif %}
                </form>

                <div class="mt-4">
                    <h5>Search Results:</h5>
                    <table class="table table-striped" id="searchResultsA">
                        <thead>
                            <tr>
                                <th>Flight Number</th>
                                <th>Airline</th>
                                <th>Departure Airport</th>
                                <th>Arrival Airport</th>
                                <th>Departure Time</th>
                                <th>Arrival Time</th>
                                <th>Departure Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for line in table_content %}
                            <tr>
                                <td>{{line[0]}}</td>
                                <td>{{line[1]}}</td>
                                <td>{{line[2]}}</td>
                                <td>{{line[3]}}</td>
                                <td>{{line[4]}}</td>
                                <td>{{line[5]}}</td>
                                <td>{{line[6]}}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="flightStatus" role="tabpanel" aria-labelledby="flightStatus-tab">

                <form id="flightSearchFormB" action="/flightSearchB" method="POST">
                    <!-- Form content for Search for Flight Status -->
                    <div class="form-group">
                        <label for="searchFactorB">Search By:</label>
                        <select class="form-control" id="searchFactorB" name="searchFactorB" required>
                            <option value="flightNumber">Flight Number</option>
                            <option value="date">Date</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="flightNumber">Flight Number:</label>
                        <input type="text" class="form-control" id="flightNumber" name="flightNumber">
                    </div>
                    <div class="form-group">
                        <label for="dateB">Date:</label>
                        <input type="date" class="form-control" id="dateB" name="dateB">
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                    {% if error %}
                        <p class="error"><strong>Error:</strong> {{error}}</p>
                    {% endif %}
                </form>
                <div class="mt-4">
                    <h5>Search Results:</h5>
                    <table class="table table-striped" id="searchResultsB">
                        <thead>
                            <tr>
                                <th>Flight Number</th>
                                <th>Airline</th>
                                <th>Departure Airport</th>
                                <th>Arrival Airport</th>
                                <th>Departure Time</th>
                                <th>Arrival Time</th>
                                <th>Departure Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for line in table_content %}
                            <tr>
                                <td>{{line[0]}}</td>
                                <td>{{line[1]}}</td>
                                <td>{{line[2]}}</td>
                                <td>{{line[3]}}</td>
                                <td>{{line[4]}}</td>
                                <td>{{line[5]}}</td>
                                <td>{{line[6]}}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
            </div>
            
            <!-- Add your JavaScript code here -->
            <script>
                // get the searchFactorA select element
                const searchFactorA = document.getElementById("searchFactorA");
                
                // add a change event listener to the select element
                searchFactorA.addEventListener("change", function() {
                    // get the selected option
                    const selectedOption = this.options[this.selectedIndex].value;
                    
                    // hide all input fields
                    document.getElementById("sourceCityA").style.display = "none";
                    document.getElementById("labelSourceCity").style.display = "none";
                    
                    document.getElementById("destinationCityA").style.display = "none";
                    document.getElementById("labelDestinationCity").style.display = "none";
                    
                    document.getElementById("dateA").style.display = "none";
                    document.getElementById("labelDateA").style.display = "none";
                    
                    
                    // show the input field corresponding to the selected option
                    if (selectedOption === "Source City/Airport") {
                        document.getElementById("sourceCityA").style.display = "block";
                    } else if (selectedOption === "Destination City/Airport") {
                        document.getElementById("destinationCityA").style.display = "block";
                    } else if (selectedOption === "Date") {
                        document.getElementById("dateA").style.display = "block";
                    }
                });
            </script>
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
